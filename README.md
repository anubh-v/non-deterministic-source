# non-deterministic-source

### Run using `parse_and_eval`

Example:

Generate even integers between 0 and 10 (inclusive).

```js
parse_and_eval("function int_between(low, high) {\
                    return low > high ? amb() : amb(low, int_between(low + 1, high));\
                }\
                \
                function is_even(x) { return (x % 2) === 0;}\
                function divisible_by_three(x) { return (x % 3) === 0;}
                \
                let integer = int_between(0, 12);\
                require(is_even(integer) || divisible_by_three(integer));\
                integer;");

// result: 0
```
Subsequent values can be generated by typing:
```js
try_again(); // result: 2
try_again(); // result: 3
try_again(); // result: 4
try_again(); // result: 6
try_again(); // result: 8
try_again(); // result: 9
try_again(); // result: 10
try_again(); // result: 12
try_again(); // result: null
```


### Other quick examples

```js
parse_and_eval("const integer_from = n => amb(n, integer_from(n + 1)); integer_from(1);");
// result: 1
try_again(); // result: 2
try_again(); // result: 3
try_again(); // result: 4 ... and so on...
```

```js
parse_and_eval("const f = amb(1, 2, 3); const g = amb(5, 6, 7); f;");
// Result: 1, 1, 1, 2, 2, 2, 3, 3, 3 (use the try_again() function)
```

```js
parse_and_eval("const f = amb(1, 2, 3); const g = amb(5, 6, 7); g;");
// Result: 5, 6, 7, 5, 6, 7, 5, 6, 7 (use the try_again() function)
```

### Running Tests

1. Copy the code from the following files into the playground:
    * `evaluator.js`
    * `test.js`
    * `source-test/main.js`

2. Remove one of the two instances of the repeated function `variable_declaration_name` (from `evaluator.js` and `source-test/main.js`)
